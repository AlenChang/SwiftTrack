/*
 * Academic License - for use in teaching, academic research, and meeting
 * course requirements at degree granting institutions only.  Not for
 * government, commercial, or other organizational use.
 * File: filter.c
 *
 * MATLAB Coder version            : 5.5
 * C/C++ source code generated on  : 29-Jan-2023 18:06:51
 */

/* Include Files */
#include "filter.h"
#include "recalibrateHistory_emxutil.h"
#include "recalibrateHistory_types.h"
#include "rt_nonfinite.h"

/* Function Definitions */
/*
 * Arguments    : const emxArray_real_T *x
 *                emxArray_real_T *y
 * Return Type  : void
 */
void filter(const emxArray_real_T *x, emxArray_real_T *y)
{
  static const double b[286] = {
      0.0179,  0.002,   0.0019,  0.0017,  0.0014,  0.001,   0.0004,  -0.0002,
      -0.0009, -0.0016, -0.0023, -0.0029, -0.0035, -0.004,  -0.0044, -0.0046,
      -0.0047, -0.0046, -0.0044, -0.004,  -0.0034, -0.0027, -0.002,  -0.0012,
      -0.0005, 0.0003,  0.0009,  0.0014,  0.0018,  0.002,   0.002,   0.0017,
      0.0013,  0.0007,  -0.0001, -0.001,  -0.002,  -0.003,  -0.004,  -0.005,
      -0.0058, -0.0065, -0.007,  -0.0072, -0.0072, -0.0069, -0.0064, -0.0057,
      -0.0048, -0.0037, -0.0026, -0.0014, -0.0003, 0.0007,  0.0016,  0.0022,
      0.0026,  0.0027,  0.0025,  0.002,   0.0012,  0.0001,  -0.0011, -0.0026,
      -0.004,  -0.0055, -0.007,  -0.0083, -0.0093, -0.0101, -0.0106, -0.0107,
      -0.0104, -0.0098, -0.0088, -0.0076, -0.0061, -0.0045, -0.0029, -0.0012,
      0.0003,  0.0016,  0.0026,  0.0033,  0.0036,  0.0034,  0.0028,  0.0017,
      0.0003,  -0.0014, -0.0033, -0.0054, -0.0075, -0.0095, -0.0113, -0.0128,
      -0.014,  -0.0146, -0.0147, -0.0143, -0.0134, -0.012,  -0.0101, -0.0079,
      -0.0055, -0.003,  -0.0005, 0.0018,  0.0038,  0.0053,  0.0063,  0.0066,
      0.0062,  0.0051,  0.0034,  0.001,   -0.002,  -0.0054, -0.0089, -0.0126,
      -0.0161, -0.0192, -0.0218, -0.0236, -0.0245, -0.0244, -0.023,  -0.0204,
      -0.0166, -0.0116, -0.0055, 0.0015,  0.0093,  0.0177,  0.0263,  0.035,
      0.0433,  0.0511,  0.0581,  0.064,   0.0686,  0.0718,  0.0734,  0.0734,
      0.0718,  0.0686,  0.064,   0.0581,  0.0511,  0.0433,  0.035,   0.0263,
      0.0177,  0.0093,  0.0015,  -0.0055, -0.0116, -0.0166, -0.0204, -0.023,
      -0.0244, -0.0245, -0.0236, -0.0218, -0.0192, -0.0161, -0.0126, -0.0089,
      -0.0054, -0.002,  0.001,   0.0034,  0.0051,  0.0062,  0.0066,  0.0063,
      0.0053,  0.0038,  0.0018,  -0.0005, -0.003,  -0.0055, -0.0079, -0.0101,
      -0.012,  -0.0134, -0.0143, -0.0147, -0.0146, -0.014,  -0.0128, -0.0113,
      -0.0095, -0.0075, -0.0054, -0.0033, -0.0014, 0.0003,  0.0017,  0.0028,
      0.0034,  0.0036,  0.0033,  0.0026,  0.0016,  0.0003,  -0.0012, -0.0029,
      -0.0045, -0.0061, -0.0076, -0.0088, -0.0098, -0.0104, -0.0107, -0.0106,
      -0.0101, -0.0093, -0.0083, -0.007,  -0.0055, -0.004,  -0.0026, -0.0011,
      0.0001,  0.0012,  0.002,   0.0025,  0.0027,  0.0026,  0.0022,  0.0016,
      0.0007,  -0.0003, -0.0014, -0.0026, -0.0037, -0.0048, -0.0057, -0.0064,
      -0.0069, -0.0072, -0.0072, -0.007,  -0.0065, -0.0058, -0.005,  -0.004,
      -0.003,  -0.002,  -0.001,  -0.0001, 0.0007,  0.0013,  0.0017,  0.002,
      0.002,   0.0018,  0.0014,  0.0009,  0.0003,  -0.0005, -0.0012, -0.002,
      -0.0027, -0.0034, -0.004,  -0.0044, -0.0046, -0.0047, -0.0046, -0.0044,
      -0.004,  -0.0035, -0.0029, -0.0023, -0.0016, -0.0009, -0.0002, 0.0004,
      0.001,   0.0014,  0.0017,  0.0019,  0.002,   0.0179};
  const double *x_data;
  double *y_data;
  int i;
  int j;
  int k;
  int nx;
  int nx_m_nb;
  x_data = x->data;
  nx = x->size[0];
  i = y->size[0];
  y->size[0] = x->size[0];
  emxEnsureCapacity_real_T(y, i);
  y_data = y->data;
  nx_m_nb = x->size[0];
  for (i = 0; i < nx_m_nb; i++) {
    y_data[i] = 0.0;
  }
  if (x->size[0] >= 572) {
    for (k = 0; k < 286; k++) {
      nx_m_nb = k + 1;
      for (j = nx_m_nb; j <= nx; j++) {
        y_data[j - 1] += b[k] * x_data[(j - k) - 1];
      }
    }
  } else {
    int naxpy;
    int y_tmp;
    if (x->size[0] > 286) {
      nx_m_nb = x->size[0] - 287;
    } else {
      nx_m_nb = -1;
    }
    for (k = 0; k <= nx_m_nb; k++) {
      for (j = 0; j < 286; j++) {
        y_tmp = k + j;
        y_data[y_tmp] += x_data[k] * b[j];
      }
    }
    naxpy = x->size[0] - nx_m_nb;
    i = nx_m_nb + 2;
    for (k = i; k <= nx; k++) {
      for (j = 0; j <= naxpy - 2; j++) {
        y_tmp = (k + j) - 1;
        y_data[y_tmp] += x_data[k - 1] * b[j];
      }
      naxpy--;
    }
  }
}

/*
 * File trailer for filter.c
 *
 * [EOF]
 */
